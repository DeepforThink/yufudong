---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import { SITE } from "@/config";

const friends = [
  {
    name: "Kinnari Blog",
    url: "https://kinnari-blog.vercel.app/",
    description: "æ¢¦æƒ³æ˜¯æˆä¸ºä¸€åª fumo",
    avatar: "https://avatars.githubusercontent.com/u/141706972?v=4"
  },
  {
    name: "Tendourisu's Site",
    url: "https://tendourisu.github.io/",
    description: "é‚¦é‚¦å’”é‚¦ï¼é‡ç”Ÿçš„TendouRisu!",
    avatar: "https://avatars.githubusercontent.com/u/161988620?v=4"
  }
    // {
    //   name: "æœ‹å‹çš„åšå®¢",
    //   url: "https://friend-blog.com",
    //   description: "ç®€çŸ­çš„ä»‹ç»æˆ–å°è±¡",
    //   avatar: "https://friend-avatar.jpg"
    // }
];
---

<Layout title={`friends | ${SITE.title}`}>
  <Header />
  
  <main id="main-content" class="mx-auto w-full max-w-app px-4 pb-12 pt-8">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-skin-accent mb-4">å‹é“¾</h1>
      <p class="text-lg text-skin-base opacity-80">
        è¿™æ˜¯æˆ‘çš„æœ‹å‹ä»¬ï¼
      </p>
    </div>

    <!-- å‹é“¾å¡ç‰‡ç½‘æ ¼ -->
    {friends.length > 0 ? (
      <div class="grid gap-8 sm:grid-cols-1 lg:grid-cols-2 mb-12">
        {friends.map(friend => (
          <div class="group relative">
            <a 
              href={friend.url} 
              target="_blank" 
              rel="noopener noreferrer"
              class="block h-full"
            >
              <div class="h-full border border-skin-line rounded-lg p-8 bg-skin-card hover:shadow-lg hover:scale-105 transition-all duration-300">
                <!-- å¤´åƒå’Œåç§° -->
                <div class="flex items-center mb-6">
                  <img 
                    src={friend.avatar} 
                    alt={friend.name}
                    class="w-16 h-16 rounded-full border-2 border-skin-accent mr-6 group-hover:border-opacity-80"
                    onerror="this.src='https://via.placeholder.com/64/666/fff?text=A'"
                  />
                  <div>
                    <h3 class="text-xl font-semibold text-skin-accent group-hover:text-opacity-80 mb-2">
                      {friend.name}
                    </h3>
                    <div class="text-base text-skin-base opacity-60">
                      {new URL(friend.url).hostname}
                    </div>
                  </div>
                </div>
                
                <!-- æè¿° -->
                <p class="text-skin-base text-base leading-relaxed line-clamp-3">
                  {friend.description}
                </p>
                
                <!-- æ‚¬åœæ•ˆæœæŒ‡ç¤ºå™¨ -->
                <div class="absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <svg class="w-6 h-6 text-skin-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                  </svg>
                </div>
              </div>
            </a>
          </div>
        ))}
      </div>
    ) : (
      <div class="text-center mb-12 py-12">
        <div class="text-6xl mb-4">ğŸŒ±</div>
        <p class="text-lg text-skin-base opacity-70 italic">
          è¿™é‡Œè¿˜æ¯”è¾ƒç©ºæ—·ï¼Œç­‰å¾…é‡è§æ›´å¤šæœ‰è¶£çš„çµé­‚...
        </p>
      </div>
    )}

    <!-- åˆ†éš”çº¿ -->
    <hr class="border-skin-line mb-12" />

    <!-- æƒ³è¦äº¤æ¢å‹é“¾ -->
    <div class="bg-skin-card border border-skin-line rounded-lg p-8 mb-8">
      <h2 class="text-2xl font-bold text-skin-accent mb-4 text-center">æƒ³è¦äº¤æ¢å‹é“¾ï¼Ÿ</h2>
      <p class="text-skin-base text-center mb-6 leading-relaxed">
        å¦‚æœä½ ä¹Ÿåœ¨ç”¨æ–‡å­—è®°å½•ç”Ÿæ´»å’Œæ€è€ƒï¼Œæ¬¢è¿é€šè¿‡é‚®ä»¶è”ç³»æˆ‘ã€‚
      </p>
    </div>

    <!-- å…³äºå‹é“¾ -->
    <div class="bg-skin-card border border-skin-line rounded-lg p-8 mb-12">
      <h2 class="text-2xl font-bold text-skin-accent mb-4 text-center">å…³äºå‹é“¾</h2>
      <p class="text-skin-base text-center italic leading-relaxed">
        "å¥½ä¹…ä¸è§"æ˜¯æˆ‘ä¸€ç¯‡åšå®¢çš„å¼€å¤´ï¼Œä¹Ÿæ˜¯æˆ‘æƒ³å¯¹æ¯ä¸€ä½è·¯è¿‡çš„æœ‹å‹è¯´çš„è¯ã€‚
      </p>
    </div>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <div class="bg-skin-card border border-skin-line rounded-lg p-8">
      <h2 class="text-2xl font-bold text-skin-accent mb-6 text-center">ğŸ’¬ ç•™è¨€è¯„è®º</h2>
      <p class="text-skin-base text-center mb-8 opacity-80">
        æ¬¢è¿åœ¨è¿™é‡Œç•™ä¸‹æ‚¨çš„æƒ³æ³•å’Œå»ºè®®ï¼Œæˆ–è€…ç”³è¯·å‹é“¾äº¤æ¢ï¼
      </p>
      
      <!-- è¯„è®ºè¡¨å• -->
      <div class="max-w-2xl mx-auto">
        <form class="space-y-6" id="comment-form">
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label for="name" class="block text-sm font-medium text-skin-base mb-2">
                æ˜µç§° <span class="text-red-500">*</span>
              </label>
              <input 
                type="text" 
                id="name" 
                name="name"
                required
                class="w-full px-4 py-3 border border-skin-line rounded-lg bg-skin-card text-skin-base focus:outline-none focus:ring-2 focus:ring-skin-accent focus:border-transparent"
                placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°"
              />
            </div>
            <div>
              <label for="email" class="block text-sm font-medium text-skin-base mb-2">
                é‚®ç®± <span class="text-red-500">*</span>
              </label>
              <input 
                type="email" 
                id="email" 
                name="email"
                required
                class="w-full px-4 py-3 border border-skin-line rounded-lg bg-skin-card text-skin-base focus:outline-none focus:ring-2 focus:ring-skin-accent focus:border-transparent"
                placeholder="æ‚¨çš„é‚®ç®±åœ°å€"
              />
            </div>
          </div>
          
          <!-- ç½‘ç«™é“¾æ¥ï¼ˆå¯é€‰ï¼‰ -->
          <div>
            <label for="website" class="block text-sm font-medium text-skin-base mb-2">
              ä¸ªäººç½‘ç«™ï¼ˆå¯é€‰ï¼‰
            </label>
            <input 
              type="url" 
              id="website" 
              name="website"
              class="w-full px-4 py-3 border border-skin-line rounded-lg bg-skin-card text-skin-base focus:outline-none focus:ring-2 focus:ring-skin-accent focus:border-transparent"
              placeholder="https://your-website.com"
            />
          </div>
          
          <!-- è¯„è®ºå†…å®¹ -->
          <div>
            <label for="message" class="block text-sm font-medium text-skin-base mb-2">
              ç•™è¨€å†…å®¹ <span class="text-red-500">*</span>
            </label>
            <textarea 
              id="message" 
              name="message"
              required
              rows="5"
              class="w-full px-4 py-3 border border-skin-line rounded-lg bg-skin-card text-skin-base focus:outline-none focus:ring-2 focus:ring-skin-accent focus:border-transparent resize-vertical"
              placeholder="å†™ä¸‹æ‚¨æƒ³è¯´çš„è¯..."
            ></textarea>
          </div>
          
          <!-- æäº¤æŒ‰é’® -->
          <div class="text-center">
            <button 
              type="submit"
              class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-skin-accent hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-skin-accent transition-all duration-300"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
              </svg>
              å‘é€ç•™è¨€
            </button>
          </div>
        </form>
        
        <!-- æç¤ºä¿¡æ¯ -->
        <div class="mt-6 text-center">
          <p class="text-sm text-skin-base opacity-70">
            ğŸ’¡ æç¤ºï¼šè¯„è®ºå°†é€šè¿‡é‚®ä»¶å‘é€ç»™æˆ‘ï¼Œæˆ‘ä¼šå°½å¿«å›å¤æ‚¨
          </p>
        </div>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  // è¯„è®ºè¡¨å•å¤„ç†
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('comment-form') as HTMLFormElement;
    
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // è·å–è¡¨å•æ•°æ®
        const formData = new FormData(form);
        const name = formData.get('name') as string;
        const email = formData.get('email') as string;
        const website = formData.get('website') as string;
        const message = formData.get('message') as string;
        
        // æ„å»ºé‚®ä»¶å†…å®¹
        const subject = encodeURIComponent(`å‹é“¾é¡µé¢ç•™è¨€ - æ¥è‡ª ${name}`);
        const body = encodeURIComponent(`
æ˜µç§°: ${name}
é‚®ç®±: ${email}
ç½‘ç«™: ${website || 'æœªå¡«å†™'}

ç•™è¨€å†…å®¹:
${message}

---
æ­¤ç•™è¨€æ¥è‡ªæ‚¨çš„åšå®¢å‹é“¾é¡µé¢
        `);
        
        // ä½¿ç”¨ mailto é“¾æ¥
        const mailtoLink = `mailto:yf_dong@mail.nankai.edu.cn?subject=${subject}&body=${body}`;
        
        // æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯
        window.location.href = mailtoLink;
        
        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        alert('æ­£åœ¨æ‰“å¼€æ‚¨çš„é‚®ä»¶å®¢æˆ·ç«¯ï¼Œè¯·å‘é€é‚®ä»¶å®Œæˆç•™è¨€ï¼');
      });
    }
  });
</script>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
